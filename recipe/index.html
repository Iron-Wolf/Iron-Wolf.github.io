<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Seasonal vegetables</title>
  <!-- markdown parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <h1>Seasonal vegetables</h1>
  
  <div id="table-container"></div>
  <div id="markdown-content">Chargement du contenu...</div>

  <script>
    // === Configuration: list vegetables and their months (1 = Jan, 12 = Dec) ===
    // sources : 
    // - http://www.vedura.fr/guide/legumes/
    // - https://www.jardiner-malin.fr/fiche/potager
    const vegetables = [
      { name: "Aubergine", months: [7,8,9,10], icon: "üçÜ"},
      { name: "Brocoli", months: [7,8,9,10,11], icon: "https://cdn-icons-png.flaticon.com/512/13988/13988873.png"},
      { name: "C√©leri branche", months: [7,8,9,10], icon: "https://cdn-icons-png.flaticon.com/512/1790/1790400.png"},
      { name: "C√©leri rave", months: [7,8,9,10], icon: "https://cdn-icons-png.flaticon.com/512/8886/8886093.png"},
      { name: "Champignons", months: [8,9,10,11], icon: "üçÑ"},
      { name: "Chou blanc", months: [1,2,3,4,5,6,7,8,9,10,11,12], icon: "https://cdn-icons-png.flaticon.com/512/12915/12915370.png"},
      { name: "Chou fleur", months: [6,7,8,9,10,11], icon: "https://cdn-icons-png.flaticon.com/512/1790/1790366.png"},
      { name: "Concombre", months: [6,7,8,9,10], icon: "https://cdn-icons-png.flaticon.com/128/1790/1790396.png"},
      { name: "Courgettes", months: [6,7,8], icon: "https://cdn-icons-png.flaticon.com/512/6108/6108510.png"},
      { name: "Endive", months: [1,2,3,4,11,12]},
      { name: "Epinard", months: [1,2,3,4,5,6,10,11,12], icon: "https://cdn-icons-png.flaticon.com/128/1790/1790430.png"},
      { name: "F√®ve", months: [4,5,6,7], icon: "https://cdn-icons-png.flaticon.com/512/5948/5948365.png"},
      { name: "Haricot vert", months: [5,6,7,8,9,10], icon: "https://cdn-icons-png.flaticon.com/512/4977/4977343.png"},
      { name: "Oignon", months: [1,2,3,4,5,6,7,8,9,10,11,12], icon: "https://cdn-icons-png.flaticon.com/512/1790/1790392.png"},
      { name: "Petit pois", months: [4,5,6,7], icon: "https://cdn-icons-png.flaticon.com/128/1790/1790360.png"},
      { name: "Tomate", months: [7,8,9,10], icon: "https://cdn-icons-png.flaticon.com/128/1790/1790387.png" },
    ];

    // Month names for the header (adjust language if you want)
    const monthNames = ["Jan", "F√©v", "Mar", "Avr", "Mai", "Juin", 
                      "Juil", "Ao√ª", "Sep", "Oct", "Nov", "D√©c"];

    // current month number 1..12
    const currentMonth = new Date().getMonth() + 1;

    // === Generate table HTML ===
    function generateTable() {
      let html = "<table border='1' cellpadding='5' cellspacing='0'><thead><tr>";
      html += "<th>Vegetable</th>";
      monthNames.forEach((m, i) => {
        // highlight current month with a background color (th are bold by default)
        if (i + 1 === currentMonth) {
          html += `<th style="background-color:#ffef90;font-weight:700">${m}</th>`;
        } else {
          html += `<th>${m}</th>`;
        }
      });
      html += "</tr></thead><tbody>";

      vegetables.forEach(veg => {
        const inSeasonNow = veg.months.includes(currentMonth);
        // bold the whole row if the vegetable is in season this month
        html += `<tr${inSeasonNow ? ` style="font-weight:700"` : ""}>`;
        html += `<td>${veg.icon ? (veg.icon.startsWith("http") ? `<img src="${veg.icon}" alt="" width="20">` : veg.icon) : ""} ${veg.name}</td>`;

        for (let m = 1; m <= 12; m++) {
          html += `<td>${veg.months.includes(m) ? "X" : ""}</td>`;
        }
        html += "</tr>";
      });

      html += "</tbody></table>";
      document.getElementById("table-container").innerHTML = html;
    }

    generateTable();
  </script>
  
  <script>
    // URL of the markdown file
    const markdownUrl = 'https://raw.githubusercontent.com/Iron-Wolf/Iron-Wolf.github.io/refs/heads/master/recipe/README.md';

    fetch(markdownUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error(`Loading error : ${response.status}`);
        }
        return response.text();
      })
      .then(md => {
        // Convert to HTML
        const html = marked.parse(md);
        document.getElementById('markdown-content').innerHTML = html;
      })
      .catch(error => {
        document.getElementById('markdown-content').innerHTML =
          `<p style="color:red;">Rendering error : ${error.message}</p>`;
      });
  </script>
</body>
</html>
